<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Pedidos </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="../css/home.css">
  <script defer src="../js/peca_editar.js"></script>
  <link rel="stylesheet" href="../css/calendar.css">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body onload="viewClientesRegistrados()">
  <header class="header py-4 bg-light px-0">
    <div class="container d-flex justify-content-between align-items-center">
      <a href="">
        <img
          src="../assets/botao-voltar 4.svg"
          alt="botao-voltar"
          class="mx-3"
          onclick="window.history.back()"
      /></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
          <img
          src="../assets/burger-bar 1 (1).svg"
          alt="menu-lateral"
          class="navbar-toggler-icon mx-3"/>
      </button>
      <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel" style="background-color: #012171; color: white; border-radius: 1rem 0rem 0rem 1rem; width: 65%;">
        <div class="offcanvas-body">
          <ul class="navbar-nav justify-content-end flex-grow-1 pe-3 gap-4" style="font-size: larger; margin-left: 2rem; margin-top: 6rem;">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="../home.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../pedido.html">Pedidos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contatos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../fichas/Lista_fichas.html">Fichas</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../Lista-peca.html">Produtos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../Lista-tecido.html">Tecidos</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="dashHome.html">Monitoramento</a>
            </li>
        </div>
      </div>
    </div>
  </header>

    <div style="border-radius: 0% 0% 0% 50%; background-color: #012171; width: 100%; height: 12rem;" class="mb-5 shadow">
        <div class="d-flex justify-content-around align-items-center pt-4">
            <div class="col-8">
                <h5 class="card-title fs-1" style="color: white; font-weight: 400;">Meus Pedidos</h5>
                <i class="card-subtitle mb-2" style="color: white; font-size: small;">Dados atualizados <span id="anoAtual"></span></i>
            </div>
            <img class="image col-4" style="width: 11%;" src="../assets/pedidoiconeDash.svg"/>
        </div>
        <div style="position: relative; top: 20%; left: 25%;">
            <div class="card shadow rounded-4" style="width: 50%;">
                <div class="card-body shadow rounded-4">
                    <div class="d-flex justify-content-center align-items-center">
                        <div class="text-center">
                            <p style="color: #696969; font-size: 0.8rem;">O número de pedidos cresceu: </p>
                            <div class="d-flex ">
                                <h3 style="text-shadow: 0px 2px 3px black; font-size: 2rem; font-weight: 450;" class="col-7 text-start mx-2"><span id="clientesRegistrados"></span>%</h3>
                                <span class="col-1"></span>
                                <img src="../assets/iconeDashAumento.svg" class="col-3"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="py-4 mx-4 px-3">
        <p style="color: #696969;">Clique aqui para visualizar a comparação com o semestre anterior</p>
        <select class="form-select" aria-label="Default select example">
            <option selected>Selecionar</option>

          </select>
    </div>

    <div class="container bg-light rounded-4" style="width: 90%; margin-left: 5%;">
        <div style="width: 50%; margin: 0 auto;"></div>
            <canvas id="pedidoChart"></canvas>
        </div>
    </div>
    <div class="d-flex container m-3 align-items-center">
        <img src="../assets/retanguloAmareloDash.svg"/>
        <span>&nbsp; Poucos pedidos no mês</span>
    </div>

</body>

<script>
    const currentYear = new Date().getFullYear();
    document.getElementById("anoAtual").innerHTML = currentYear;


    function viewClientesRegistrados(){
      var id = sessionStorage.getItem("id")
      
        var FormatedData = 5

        document.getElementById("clientesRegistrados").innerHTML = FormatedData
    }

    function meses(){}

    function chart(){}

</script>

<!-- chart -->
<script>
    const pedidos = [9, 4, 5, 2, 3, 8, 10]; // Valores dos pedidos
    const menorValor = Math.min(...pedidos); // Encontrar o menor valor

    const ctx = document.getElementById('pedidoChart').getContext('2d');

    const pedidoChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul'],
            datasets: [{
                label: 'Pedidos',
                data: pedidos,
                backgroundColor: pedidos.map(pedido => 
                    pedido === menorValor ? 'rgba(255, 206, 86, 1)' : 'rgba(54, 162, 235, 1)'
                ), // Cor diferente para o menor valor
                borderColor: pedidos.map(pedido => 
                    pedido === menorValor ? 'rgba(255, 206, 86, 1)' : 'rgba(54, 162, 235, 1)'
                ),
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        stepSize: 2
                    }
                }
            },
            plugins: {
                title: {
                    display: true,
                    text: 'Acompanhe sua frequência de pedidos mensal'
                },
                legend: {
                    display: false
                }
            }
        }
    });
</script>